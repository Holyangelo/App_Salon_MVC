let paso=1;const inicial=1,final=3,cita={nombre:"",fecha:"",hora:"",servicios:[]};document.addEventListener("DOMContentLoaded",()=>{iniciarApp()});const iniciarApp=()=>{mostrarSeccion(),tabs(),botonesPaginador(),paginaSiguiente(),paginaAnterior(),consultarAPI()},mostrarSeccion=()=>{const e=document.querySelector(".mostrar");e&&e.classList.remove("mostrar");const t=document.querySelector(".actual");t&&t.classList.remove("actual");const o="#paso-"+paso;document.querySelector(o).classList.add("mostrar");document.querySelector(`[data-paso="${paso}"]`).classList.add("actual")},tabs=()=>{document.querySelectorAll(".tabs button").forEach(e=>{e.addEventListener("click",e=>{paso=parseInt(e.target.dataset.paso),mostrarSeccion(),botonesPaginador()})})},botonesPaginador=()=>{const e=document.querySelector("#siguiente"),t=document.querySelector("#anterior");1===paso?(t.classList.add("ocultar"),t.setAttribute("disabled",""),e.classList.remove("ocultar"),e.removeAttribute("disabled","")):3===paso?(t.classList.remove("ocultar"),t.removeAttribute("disabled",""),e.classList.add("ocultar"),e.setAttribute("disabled","")):2===paso&&(t.classList.remove("ocultar"),t.removeAttribute("disabled",""),e.classList.remove("ocultar"),e.removeAttribute("disabled","")),mostrarSeccion()},paginaSiguiente=()=>{document.querySelector("#siguiente").addEventListener("click",()=>{paso>=3||(paso++,botonesPaginador())})},paginaAnterior=()=>{document.querySelector("#anterior").addEventListener("click",()=>{paso<=1||(paso--,botonesPaginador())})},consultarAPI=async()=>{try{const e="http://localhost:3000/api/servicios",t=await fetch(e),o=await t.json();mostrarServicios(o)}catch(e){console.log(e)}},seleccionarServicio=e=>{const{id:t}=e,{servicios:o}=cita,a=document.querySelector(`[data-id-servicio="${t}"]`);o.some(e=>e.id===t)?(cita.servicios=o.filter(e=>e.id!==t),a.classList.remove("seleccionado")):(cita.servicios=[...o,e],a.classList.add("seleccionado")),console.log(cita)},mostrarServicios=e=>{e.forEach(e=>{const{id:t,nombre:o,precio:a}=e,s=document.createElement("P");s.classList.add("nombre-servicio"),s.textContent=o;const c=document.createElement("P");c.classList.add("precio-servicio"),c.textContent="$"+a;const i=document.createElement("DIV");i.classList.add("servicio"),i.dataset.idServicio=t,i.onclick=()=>{seleccionarServicio(e)},i.appendChild(s),i.appendChild(c),document.querySelector("#servicios").appendChild(i)})};